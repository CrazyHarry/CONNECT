<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Connect by CONNECT-Solution</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Connect</h1>
        <h2>CONNECT Codebase (2.x, 3.x, 4.x)</h2>
        <a href="https://github.com/CONNECT-Solution/CONNECT" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="connect" class="anchor" href="#connect"><span class="octicon octicon-link"></span></a>CONNECT</h1>

<p>CONNECT is an open source software solution that supports health information exchange - both locally and at the national level. CONNECT uses Nationwide Health Information Network standards and governance to make sure that health information exchanges are compatible with other exchanges being set up throughout the country.</p>

<p>This software solution was initially developed by federal agencies to support their health-related missions, but it is now available to all organizations and can be used to help set up health information exchanges and share data using nationally-recognized interoperability standards.</p>

<h2>
<a name="uses" class="anchor" href="#uses"><span class="octicon octicon-link"></span></a>Uses</h2>

<p>CONNECT can be used to:</p>

<ul>
<li>Set up a health information exchange within an organization</li>
<li>Tie a health information exchange into a regional network of health information exchanges using Nationwide Health Information Network standards</li>
<li>Send and receive Direct messages, see: <a href="https://github.com/CONNECT-Solution/CONNECT/blob/CONNECT_integration/Product/Production/Services/DirectCore/README.md">Setting up CONNECT as a Direct HISP</a>
</li>
</ul><p>By advancing the adoption of interoperable health IT systems and health information exchanges, the country will better be able to achieve the goal of making sure all citizens have electronic health records by 2014. Health data will be able to follow a patient across the street or across the country.</p>

<h2>
<a name="solution" class="anchor" href="#solution"><span class="octicon octicon-link"></span></a>Solution</h2>

<p>Three primary elements make up the CONNECT solution:</p>

<ul>
<li><p>The Core Services Gateway provides the ability to locate patients at other organizations, request and receive documents associated with the patient, and record these transactions for subsequent auditing by patients and others. Other features include mechanisms for authenticating network participants, formulating and evaluating authorizations for the release of medical information, and honoring consumer preferences for sharing their information. The Nationwide Health Information Network Interface specifications are implemented within this component.</p></li>
<li><p>The Enterprise Service Components provide default implementations of many critical enterprise components required to support electronic health information exchange, including a Master Patient Index (MPI), XDS.b Document Registry and Repository, Authorization Policy Engine, Consumer Preferences Manager, HIPAA-compliant Audit Log and others. Implementers of CONNECT are free to adopt the components or use their own existing software for these purposes.</p></li>
<li><p>The Universal Client Framework contains a set of applications that can be adapted to quickly create an edge system, and be used as a reference system, and/or can be used as a test and demonstration system for the gateway solution. This makes it possible to innovate on top of the existing CONNECT platform.</p></li>
</ul><h2>
<a name="history" class="anchor" href="#history"><span class="octicon octicon-link"></span></a>History</h2>

<ul>
<li>4.0 released February 2013</li>
<li>3.3 released March 2012</li>
</ul><p>For more information, about CONNECT's history see <a href="./CONNECT/HISTORY.md">HISTORY.md</a></p>

<h2>
<a name="getting-started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a name="prerequisites" class="anchor" href="#prerequisites"><span class="octicon octicon-link"></span></a>Prerequisites</h3>

<p>Before you get started, you'll need the following installed and set up:</p>

<ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java (JDK) 7</a></li>
<li>
<a href="http://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html">Java Cryptography Extension (JCE) Unlimited Strength Jurisdiction Policy Files</a>

<ul>
<li>Install under $JAVA_HOME/jre/lib/security</li>
</ul>
</li>
<li>
<a href="http://maven.apache.org/download.html">Maven 3.0.4+</a>    See <a href="http://maven.apache.org/download.html#Installation">installation instructions</a>.</li>
<li><a href="http://dev.mysql.com/downloads/mysql/5.1.html#downloads">MySQL 5.1.x</a></li>
<li>
<a href="http://www.eclipse.org/downloads/">Eclipse Juno</a>

<ul>
<li><a href="http://www.eclipse.org/egit/">egit plugin</a></li>
<li><a href="http://www.eclipse.org/m2e/download/">m2eclipse plugin</a></li>
</ul>
</li>
<li><a href="http://ant.apache.org/">Apache Ant v1.7.1</a></li>
</ul><h3>
<a name="building-from-source" class="anchor" href="#building-from-source"><span class="octicon octicon-link"></span></a>Building from source</h3>

<p>To build all CONNECT modules from source, run:</p>

<p>Windows Users:</p>

<pre><code>    $ set MAVEN_OPTS='-Xmx5000m -XX:MaxPermSize=1024m'
</code></pre>

<p>OSX / Linux Users:</p>

<pre><code>    $ export MAVEN_OPTS='-Xmx5000m -XX:MaxPermSize=1024m'
</code></pre>

<p>Everyone:</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;
    $ mvn clean install
</code></pre>

<h4>
<a name="building-an-ear" class="anchor" href="#building-an-ear"><span class="octicon octicon-link"></span></a>Building an ear</h4>

<p>All services profiles are active by default, so to build an ear containing all services, just execute:</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;
    $ mvn clean install
</code></pre>

<p>If you want to exclude a service, in this case Patient Discovery, you can turn off the profile by adding a "!" to the name of the service profile you'd like to exclude (needs to be escaped with "\" char on *NIX) platforms:</p>

<pre><code>    $ mvn clean install -P \!PD
</code></pre>

<p>Available service profiles which can be excluded from the generated ear (use value within parentheses):</p>

<ul>
<li>Admin Distribution (AD)</li>
<li>Patient Discovery (PD)</li>
<li>Document Query (DQ)</li>
<li>Document Submission (DS)</li>
<li>Document Retrieve (DR)</li>
<li>Direct(Direct)</li>
<li>CONNECTUniversalClientGUI, CONNECTConsumerPreferencesProfileGUI, CONNECTDeferredQueueManagerGUI (GUI)</li>
<li>AdapterDocRegistry2Soap12Web, AdapterDocRepository2Soap12Web (HIEOS)</li>
</ul><p>After CONNECT has been built from the clone directory, you can alter the composition of the CONNECT.ear at any time by turning off any combination of the available profiles as a comma-separated list</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;
    $ mvn clean install -P \!PD,\!DQ,\!DR -f Product/Production/Deploy/pom.xml
</code></pre>

<p>OR</p>

<pre><code>    $ cd Product/Production/Deploy/
    $ mvn clean install -P \!PD,\!DQ,\!DR
</code></pre>

<p>You can also specify explicitly what services are included in the ear by passing in the individual profiles.  For example, if you only want to include PD:</p>

<pre><code>    $ cd Product/Production/Deploy/
    $ mvn clean install -P PD
</code></pre>

<h6>
<a name="altering-targeted-application-server" class="anchor" href="#altering-targeted-application-server"><span class="octicon octicon-link"></span></a>Altering targeted application server</h6>

<p>For some application server deployments the generated .ear needs different dependencies. This readme describes building and deploying on GlassFish. See the CONNECT wiki for details on other application servers.</p>

<h3>
<a name="setup-glassfish-mysql--deploy-connect" class="anchor" href="#setup-glassfish-mysql--deploy-connect"><span class="octicon octicon-link"></span></a>Setup Glassfish, MySQL &amp; Deploy CONNECT</h3>

<p>These steps will install and configure a Glassfish Application Server, prepare your MySQL databases and deploy CONNECT for use. Lets get started.</p>

<p>Navigate to the /Product/Install directory</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/Install
</code></pre>

<p>Next, copy install.properties to local.install.properties and update with your local information. Generally this just specifying where
you want GlassFish to install.</p>

<pre><code>    $ cp install.properties local.install.properties
</code></pre>

<h4>
<a name="setup-mysql-databases" class="anchor" href="#setup-mysql-databases"><span class="octicon octicon-link"></span></a>Setup MySQL Databases</h4>

<p>These steps will install and configure a Glassfish Application Server to deploy and use CONNECT. Lets get started.</p>

<p>Navigate to the /Product/Install directory</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/Install
</code></pre>

<p>Next, copy install.properties to local.install.properties and update with your local information. Generally this is just specifying a password for mysql.</p>

<pre><code>    $ cp install.properties local.install.properties
</code></pre>

<p>Lastly, we're going to install the MySQL databases needed for CONNECT.</p>

<pre><code>    $ ant install.databases
</code></pre>

<p>The "mysql-connector-java-5.1.10.jar" must be copied into the following folder, for container managed database resources</p>

<pre><code>    &lt;GLASSFISH_HOME&gt;/domains/domain1/lib/ext
</code></pre>

<h4>
<a name="setup-glassfish" class="anchor" href="#setup-glassfish"><span class="octicon octicon-link"></span></a>Setup GlassFish</h4>

<p>These steps will install and configure a Glassfish Application Server to deploy and use CONNECT. Lets get started.</p>

<p>Navigate to the /Product/Install directory</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/Install
</code></pre>

<p>Next, copy install.properties to local.install.properties and update with your local information. Generally this just specifying where
you want GlassFish to install.</p>

<pre><code>    $ cp install.properties local.install.properties
</code></pre>

<p>Lastly, we're going to install the Glassfish Application Server</p>

<pre><code>    $ ant install
</code></pre>

<h4>
<a name="chain-of-trust-certificates" class="anchor" href="#chain-of-trust-certificates"><span class="octicon octicon-link"></span></a>Chain of Trust Certificates</h4>

<p>Unlike testing with the embedded glassfish and chain of trust certificates, 'ant install' generates self signed certificates at deploy time. In order to switch over to chain of trust certs follow these directions (it is recommended to back up your self signed certs first):</p>

<pre><code>    $ asadmin stop-domain domain1
    $ cp &lt;CONNECT_CLONE_DIR&gt;/Product/SoapUI_Test/ValidationSuite/src/test/resources/chaincerts/*.jks &lt;GLASSFISH_HOME&gt;/domains/domain1/config/
    $ asadmin start-domain domain1
</code></pre>

<p>The certificates that come in the CONNECT source do not include a Certificate Revocation List, therefore the following <code>domain.xml</code> properties need to be set to false:</p>

<pre><code>    &lt;jvm-options&gt;-Dcom.sun.net.ssl.checkRevocation=false&lt;/jvm-options&gt;
    &lt;jvm-options&gt;-Dcom.sun.security.enableCRLDP=false&lt;/jvm-options&gt;
</code></pre>

<h4>
<a name="deploy-to-glassfish" class="anchor" href="#deploy-to-glassfish"><span class="octicon octicon-link"></span></a>Deploy to GlassFish</h4>

<p>Navigate to the /Product/Install directory</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/Install
    $ ant deploy.connect
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>TK</p>

<h2>
<a name="testing" class="anchor" href="#testing"><span class="octicon octicon-link"></span></a>Testing</h2>

<h3>
<a name="run-the-validation-suite-as-part-of-install" class="anchor" href="#run-the-validation-suite-as-part-of-install"><span class="octicon octicon-link"></span></a>Run the Validation Suite as part of install</h3>

<p>At the end of the mvn install process, an embedded GlassFish instance will start and the Validation Suite will run against it. The maven scripts automatically stand up the embedded glassfish using trust chain certificates:</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/SoapUI_Test/ValidationSuite
    $ mvn clean install
</code></pre>

<h3>
<a name="run-the-validation-suite-via-maven-sript" class="anchor" href="#run-the-validation-suite-via-maven-sript"><span class="octicon octicon-link"></span></a>Run the Validation Suite via Maven sript</h3>

<p>The Validation Suite can be run via a Maven script against a standalone installation of the application server:</p>

<pre><code>    $ cd &lt;CONNECT_CLONE_DIR&gt;/Product/SoapUI_Test/ValidationSuite
    $ mvn verify -Dstandalone -Dproperties.dir=&lt;applicaiton server configuration dir&gt;
</code></pre>

<p>Several properties can be passed for mvn verify:</p>

<pre><code>    -Dstandalone -- must be passed in for standalone testing
    -Dproperties.dir=&lt;gateway config dir&gt; -- for GlassFish this is &lt;GlassFish home&gt;/domains/domain1/config/nhin; there is an equivalent in WebSphere 
    -Ddb.host=&lt;machine name or IP address of the MySQL server&gt; --  defaults to localhost
    -Ddb.port=&lt;####&gt; -- defaults to 3306
    -Ddb.user=&lt;database user name&gt; -- defaults to nhincuser
    -Ddb.password=&lt;database password&gt; -- defaults to nhincpass
    -Dtest.suite=&lt;g0 or g1&gt;
    -Dtest.case=&lt;test case name&gt; -- one of "Document Submission Deferred Req", "Document Submission Deferred Resp", "Document Submission", "Patient Discovery Deferred Req", "Patient Discovery Deferred Resp", "Patient Discovery", "Document Query", "Document Retrieve", "Subscribe", "Notify", "Unsubscribe", "Admin Distribution"
</code></pre>

<p>Alternatively, any of these properties can be set in your maven settings.xml file, and they will be propagated to all your builds.  Here is an example showing the mysql.root.password property set to a non-default value:</p>

<pre><code>    &lt;properties&gt;
        &lt;mysql.root.password&gt;f00B4r&lt;/mysql.root.password&gt;
        ...
    &lt;/properties&gt;
</code></pre>

<h3>
<a name="run-the-validation-suite-via-soapui" class="anchor" href="#run-the-validation-suite-via-soapui"><span class="octicon octicon-link"></span></a>Run the Validation Suite via SoapUI</h3>

<p>The Validation Suite can be run with SoapUI. First, follow the instructions "Setting up SoapUI" below.</p>

<p>Set the property "GatewayPropDir" in ConnectValidation-soapui-project.properties in the Validation Suite directory. This should be set to the gateway configuration directory. For GlassFish this is /domains/domain1/config/nhin; there is an equivalent in WebSphere</p>

<p>Run the Validation Suite project file ConnectValidation-soapui-project.xml via SoapUI's command line runner testrunner.sh (or testrunner.bat in Windows).</p>

<h2>
<a name="setting-up-soapui" class="anchor" href="#setting-up-soapui"><span class="octicon octicon-link"></span></a>Setting up SoapUI</h2>

<p>Install SoapUI v4.5.1.</p>

<p>Copy the MySQL jdbc driver mysql-connector-java-5.1.10.jar from the Maven repository directory .m2/repository/mysql/mysql-connector-java/5.1.10 to {$SoapUI_home}/bin/ext.</p>

<p>Copy the file FileUtils-4.0.0-SNAPSHOT.jar (or similarly named) to {$SoapUI_home}/bin/ext.</p>

<h2>
<a name="documentation" class="anchor" href="#documentation"><span class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a name="generate--view" class="anchor" href="#generate--view"><span class="octicon octicon-link"></span></a>Generate &amp; View</h3>

<p>You can generate the project's site information by performing the following: </p>

<pre><code>    $ mvn -P\!embedded-testing site:site site:stage -DstagingSiteURL=/tmp/fullsite
</code></pre>

<p>Then open your browser and view [file:///tmp/fullsite/index.html]</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it.</li>
<li>Create a branch (<code>git checkout -b my_feature</code>)</li>
<li>Commit your changes (<code>git commit -am "Added new feature"</code>)</li>
<li>Push to the branch (<code>git push origin my_feature</code>)</li>
<li>Open a <a href="https://github.com/CONNECT-Solution/CONNECT/pulls">Pull Request</a>
</li>
</ol>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/CONNECT-Solution/CONNECT/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/CONNECT-Solution/CONNECT/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/CONNECT-Solution/CONNECT"></a> is maintained by <a href="https://github.com/CONNECT-Solution">CONNECT-Solution</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>